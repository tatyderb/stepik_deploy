# stepik_deploy
Deploy a course to stepik.org, markdown and GIFT format.

## Загрузка данных в курс на Stepik

### Файл с уроком

**ID урока должно быть записано в файле сразу после заголовка первого уровня** `lesson = 123456`

Загрузить все шаги урока. Урок написан в файле `first_lesson.md`. ID урока должно быть описано в файле.
```bash
python deploy.py first_lesson.md
```
Загрузить второй шаг урока, первый шаг имеет номер 1. Урок написан в файле `first_lesson.md`.
```bash
python deploy.py first_lesson.md -s 2
```
Загрузить последний шаг урока, последний шаг имеет номер -1 (предпоследний -2 и т.д.). 
Урок написан в файле `first_lesson.md`.
```bash
python deploy.py first_lesson.md -s -1
```
Дополнительные опции:

* `-s N` или `--step N` - номер шага N, начинается с 1, допускаются отрицательные числа (-1 - последний шаг).
* `--id 1234` - ID урока 1234.
* `--gift` - файл в формате GIFT.

## Конфигурационный файл со структурой курса `--toc`

В конфигурационном файле курса `mycourse.yaml` взять раздел 3.8, найти файл и загрузить весь урок.
```bash
python deploy.py mycourse.yaml --toc 3.8
```

В конфигурационном файле курса `mycourse.yaml` взять раздел 3.8, найти файл и загрузить только шаг 12. 
Допускаются отрицательные номера шагов `3.8.-1` - последний шаг урока 8 в модуле 3.
```bash
python deploy.py mycourse.yaml --toc 3.8.12
```

### Обновить в файле конфигурации `mycourse.yaml` раздел `toc` с учетом ID уроков. 

* Создаются новые уроки и модули в списке конфигурации. В поле `path` пишется `none`. 
* Обновление останавливается на первой ошибке (другой ID урока или модуля). 
* В файле указан урок или модуль, которого нет в курсе - тоже ошибка.

```bash
python deploy.py mycourse.yaml --toc-update
```
## Структура файла конфигурации курса

```yaml
course_id: 1234
title: 'Курс для тестирования скриптов загрузки на степик'
lang: python3.12
dir_root: '.'
task_root: './tasks'
toc:
  - module: 1
    title: 'Введение'
    id: 11111
    dir: 'intro'
    lessons:
      - lesson: 1
        id: 1001
        title: 'О чем курс'
        file: 'intro.md'
      - lesson: 2
        id: 1002
        title: 'Основные типы шагов'
        file: 'test_types.txt'
        format: gift
```